@import url(./root.css);

/* ========================
     Main container
========================= */

.container {
     display: grid;
     grid-template-columns: 1fr 360px;
     gap: 12px;
     padding: 8px;
     max-width: 1200px;
     margin: 12px auto;
}

.left-col {
     grid-column: 1;
     grid-row: 1 / span 2;
     display: grid;
     grid-template-rows: 1fr auto;
     gap: 10px;
}

.current {
     grid-column: 1;
     grid-row: 1;
}

.controls { 
     grid-column: 1;
     grid-row: 2;
}

.right-col {
     grid-column: 2;
     grid-row: 1 / span 2;
     display: grid;
     grid-template-rows: 1fr auto;
     gap: 10px;
}

.unlisted {
     grid-row: 2;
}

.queue {
     grid-row: 1;
}

@media (max-width: 768px) {
     .container {
          grid-template-columns: 1fr;
          gap: 10px;
          padding: 10px;
          margin: 10px auto;
          width: calc(100% - 20px);
     }

     .left-col,
     .right-col {
          grid-column: 1;
          grid-row: auto;
     }

     .left-col {
          display: grid;
          grid-template-rows: auto;
          gap: 10px;
     }

     .current,
     .controls,
     .queue,
     .unlisted {
          width: 100%;
     }

     .image-preview {
          flex: 0 0 auto;
          width: 100%;
          max-width: 100%;
          max-height: 40vh;
          align-self: stretch;
          margin: 0;
     }

     .queue-image,
     .unlisted-image {
          flex: 0 0 56px;
          width: 56px;
          height: 56px;
     }

     .queue-list,
     .unlisted-list {
          max-height: 28vh;
     }

     .header-controls,
     .control-buttons {
          gap: 8px;
     }

     @media (max-width: 480px) {
          .image-preview { max-height: 32vh; }
          .queue-image, .unlisted-image { flex: 0 0 48px; width: 48px; height: 48px; }
          .queue-list, .unlisted-list { max-height: 24vh; }
          .container { padding: 8px; gap: 8px; width: calc(100% - 16px); }
     }
}

/* =========================
     Panels & Boxes
========================= */

.panel {
     background: var(--color-panel-bg);
     border-radius: 12px;
     padding: 20px;
     box-shadow: 
          0 8px 32px rgba(0, 0, 0, 0.12),
          0 2px 16px rgba(0, 0, 0, 0.08),
          inset 0 1px 0 var(--glass-border-strong);
     backdrop-filter: blur(16px) saturate(160%);
     -webkit-backdrop-filter: blur(16px) saturate(160%);
     border: 1px solid var(--glass-border);
     position: relative;
     overflow: hidden;
}

.panel::before {
     content: "";
     position: absolute;
     top: 0;
     left: 0;
     right: 0;
     height: 1px;
     background: linear-gradient(90deg, 
          transparent 0%, 
          var(--glass-border-strong) 50%, 
          transparent 100%);
}

.panel h2 {
     color: var(--color-text);
     margin-bottom: 15px;
     font-size: 1.4rem;
}

.current-box {
     border: 2px dashed var(--color-primary);
     border-radius: 12px;
     padding: 20px;
     margin-bottom: 15px;
     display: flex;
     gap: 15px;
     backdrop-filter: blur(8px);
     -webkit-backdrop-filter: blur(8px);
     background: rgba(96, 165, 250, 0.05);
}

@media (max-width: 768px) {
     .current-box {
          flex-direction: column;
     }
}

.image-preview {
     flex: 0 0 280px;
     width: 280px;
     max-width: 100%;
     max-height: 260px;
     display: block;
     margin: 0;
     padding: 0px;
     box-sizing: border-box;
     background: var(--color-surface);
     border-radius: 12px;
     object-fit: contain;
     border: 1px solid var(--glass-border);
     box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12), inset 0 1px 0 var(--glass-border-strong);
     transition: transform 160ms ease, box-shadow 160ms ease;
     align-self: center;
}

.image-info {
     flex: 1;
}

.image-info p {
     margin: 5px 0;
}

/* =========================
     Queue / Lists
========================= */

.queue-item, .unlisted-item {
     background-color: var(--color-surface-2);
     border-radius: 8px;
     padding: 15px;
     margin-bottom: 10px;
     display: flex;
     align-items: center;
     gap: 15px;
     backdrop-filter: blur(12px);
     -webkit-backdrop-filter: blur(12px);
     border: 1px solid var(--glass-border);
     box-shadow: 
          0 4px 16px rgba(0, 0, 0, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.queue-image,
.unlisted-image {
     flex: 0 0 72px;
     width: 72px;
     height: 72px;
     max-width: 100%;
     display: block;
     object-fit: cover;
     border-radius: 8px;
     background: var(--color-surface);
     border: 1px solid var(--glass-border);
     box-shadow: 0 6px 18px rgba(0,0,0,0.12), inset 0 1px 0 var(--glass-border-strong);
     overflow: hidden;
     transition: transform 160ms ease, box-shadow 160ms ease;
}

.queue-image:not(img),
.unlisted-image:not(img) {
     display: inline-flex;
     align-items: center;
     justify-content: center;
     padding: 10px;
     color: var(--color-white);
     font-weight: 600;
     min-width: 60px;
     text-align: center;
     backdrop-filter: blur(4px);
     -webkit-backdrop-filter: blur(4px);
}

.queue-info, .unlisted-info {
     flex: 1;
}

.queue-info p, .unlisted-info p {
     margin: 3px 0;
     font-size: 0.9rem;
}

/* Queue / unlisted lists scroll if long */
.queue-list,
.unlisted-list {
     max-height: 320px;
     overflow-y: auto;
     scrollbar-width: thin;
}
.queue-list::-webkit-scrollbar,
.unlisted-list::-webkit-scrollbar {
     width: 8px;
}
.queue-list::-webkit-scrollbar-track,
.unlisted-list::-webkit-scrollbar-track {
     background: var(--color-surface);
     border-radius: 4px;
}
.queue-list::-webkit-scrollbar-thumb,
.unlisted-list::-webkit-scrollbar-thumb {
     background: var(--color-gray);
     border-radius: 8px;
     border: 1px solid var(--glass-border);
}

/* =========================
     Status badges
========================= */

.status-text {
     font-weight: bold;
     display: inline-flex;
     align-items: center;
     gap: 8px;
     padding: 3px 8px;
     border-radius: 12px;
     font-size: 0.95rem;
     backdrop-filter: blur(8px);
     -webkit-backdrop-filter: blur(8px);
     border: 1px solid var(--glass-border);
}

.status-text.pending {
     color: var(--color-warning);
     background: var(--status-pending-bg);
     box-shadow: 0 2px 8px rgba(245, 158, 11, 0.2);
}
.status-text.pending::before {
     content: "";
     display: inline-block;
     width: 8px;
     height: 8px;
     border-radius: 50%;
     background: var(--color-warning);
}

.status-text.printing {
     color: var(--status-info);
     background: var(--status-printing-bg);
     box-shadow: 0 2px 8px rgba(96, 165, 250, 0.2);
}
.status-text.printing::before {
     content: "";
     display: inline-block;
     width: 8px;
     height: 8px;
     border-radius: 50%;
     background: var(--color-primary);
     animation: printing-pulse 1s infinite;
}

@keyframes printing-pulse {
     0%   { transform: scale(1); opacity: 1; }
     50%  { transform: scale(1.4); opacity: 0.6; }
     100% { transform: scale(1); opacity: 1; }
}

.status-text.offline {
     color: var(--color-muted);
     background: var(--status-offline-bg);
     box-shadow: 0 2px 8px rgba(127, 140, 141, 0.1);
}
.status-text.offline::before {
     content: "";
     display: inline-block;
     width: 8px;
     height: 8px;
     border-radius: 50%;
     background: var(--color-muted-2);
}

.status-text.error {
     color: var(--color-danger);
     background: var(--status-error-bg);
     box-shadow: 0 2px 8px rgba(251, 113, 133, 0.2);
}
.status-text.error::before {
     content: "";
     display: inline-block;
     width: 8px;
     height: 8px;
     border-radius: 50%;
     background: var(--color-danger);
}

.status-text.paused {
     color: var(--color-muted);
     background: var(--status-paused-bg);
     box-shadow: 0 2px 8px rgba(107, 114, 128, 0.08);
}
.status-text.paused::before {
     content: "";
     display: inline-block;
     width: 8px;
     height: 8px;
     border-radius: 50%;
     background: var(--color-muted-2);
     animation: paused-breathe 2s infinite;
}
@keyframes paused-breathe {
     0%   { transform: scale(1); opacity: 1; }
     50%  { transform: scale(1.15); opacity: 0.6; }
     100% { transform: scale(1); opacity: 1; }
}

/* Fallback when no status class */
.status-text:not(.pending):not(.printing):not(.offline):not(.error):not(.paused) {
     background: var(--status-offline-bg);
     color: var(--color-muted);
}

/* =========================
     Progress
========================= */

.progress-bar {
     background-color: var(--color-surface);
     border-radius: 20px;
     height: 20px;
     overflow: hidden;
     position: relative;
     backdrop-filter: blur(8px);
     -webkit-backdrop-filter: blur(8px);
     border: 1px solid var(--glass-border);
     box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}
.progress-bar::after {
     content: "";
     position: absolute;
     inset: 0;
     background:
          repeating-linear-gradient(
               45deg,
               rgba(255,255,255,0.08) 0 10px,
               transparent 10px 20px
          );
     pointer-events: none;
     mix-blend-mode: overlay;
}

.progress {
     background: linear-gradient(135deg, var(--color-success) 0%, rgba(52, 211, 153, 0.8) 100%);
     height: 100%;
     transition: width 0.3s ease;
     box-shadow: 0 0 8px rgba(52, 211, 153, 0.4);
}

/* =========================
     Toggles & Controls
========================= */

.toggle {
     display: flex;
     align-items: center;
     margin: 20px 0;
     cursor: pointer;
}

.toggle input { display: none; }

.slider {
     width: 50px;
     height: 24px;
     background-color: var(--color-gray);
     border-radius: 24px;
     margin-right: 10px;
     position: relative;
     transition: background-color 0.3s;
     backdrop-filter: blur(4px);
     -webkit-backdrop-filter: blur(4px);
     border: 1px solid var(--glass-border);
     box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}
.slider::before {
     content: "";
     position: absolute;
     height: 18px;
     width: 18px;
     left: 3px;
     top: 2px;
     background-color: var(--color-white);
     border-radius: 50%;
     transition: transform 0.3s;
     box-shadow: 
          0 2px 4px rgba(0, 0, 0, 0.2),
          0 0 0 1px var(--glass-border);
}
.toggle input:checked + .slider {
     background-color: var(--color-primary);
     box-shadow: 
          inset 0 2px 4px rgba(0, 0, 0, 0.1),
          0 0 8px rgba(96, 165, 250, 0.3);
}
.toggle input:checked + .slider::before {
     transform: translateX(26px);
     box-shadow: 
          0 2px 8px rgba(96, 165, 250, 0.3),
          0 0 0 1px var(--glass-border);
}

.control-buttons {
     display: flex;
     gap: 10px;
     margin: 20px 0;
}
@media (max-width: 768px) {
     .control-buttons { flex-wrap: wrap; }
}

/* =========================
     Utilities
========================= */

@keyframes fadeOut {
     from { opacity: 1; transform: translateY(0) scale(1); }
     to   { opacity: 0; transform: translateY(-6px) scale(0.995); }
}
@keyframes fadeIn {
     from { opacity: 0; transform: translateY(-6px) scale(0.995); }
     to   { opacity: 1; transform: translateY(0) scale(1); }
}

.badge {
     display: inline-flex;
     align-items: center;
     gap: 6px;
     font-size: .72rem;
     line-height: 1;
     letter-spacing: .6px;
     padding: 6px 8px;
     border-radius: 8px;
     font-weight: 700;
     text-transform: uppercase;
     background: var(--color-surface-2);
     color: var(--color-muted);
     backdrop-filter: blur(6px);
     -webkit-backdrop-filter: blur(6px);
     border: 1px solid var(--glass-border);
     box-shadow: 0 2px 8px rgba(0,0,0,0.04);
     transition: background-color 160ms ease, color 160ms ease, transform 120ms ease;
     user-select: none;
     white-space: nowrap;
}
.badge:active { transform: translateY(1px); }

.badge.info    { background: linear-gradient(180deg, rgba(96,165,250,0.12), rgba(96,165,250,0.06)); color: var(--color-primary); }
.badge.success { background: linear-gradient(180deg, rgba(52,211,153,0.10), rgba(52,211,153,0.04)); color: var(--color-success); }
.badge.warn    { background: linear-gradient(180deg, rgba(245,158,11,0.10), rgba(245,158,11,0.04)); color: var(--color-warning); }
.badge.danger  { background: linear-gradient(180deg, rgba(251,113,133,0.10), rgba(251,113,133,0.04)); color: var(--color-danger); }
