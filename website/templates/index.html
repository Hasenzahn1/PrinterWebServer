<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Printer Manager</title>
  <!-- Styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/styles.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/overlay.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/root.css') }}" />

    <link rel="stylesheet" href="{{ url_for('static', filename='styles/mobile.css') }}" media="(max-width: 768px)">

    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/icon.png') }}">
  <noscript>
    <style>
      .hidden{display:none!important}
      .requires-js{display:none!important}
    </style>
  </noscript>
</head>
<body>
    <div class="bg-img"></div>
    <header>
        <img src="{{ url_for('static', filename='images/icon.png') }}" alt="Logo" class="logo">
        <h1>Printer Manager</h1>
        <div class="header-controls">
            <div class="dropdown" style="position:relative;">
                <button id="appearance-dropdown-btn" class="btn" aria-haspopup="true" aria-expanded="false" title="Appearance options">
                    ðŸŽ¨
                </button>

                <div id="appearance-dropdown" class="hidden" role="menu" aria-labelledby="appearance-dropdown-btn">
                    <div class="dropdown-item">
                        <div class="dropdown-item-label">
                            <strong>Theme</strong>
                            <small>Dark mode</small>
                        </div>
                        <label class="toggle">
                            <input id="theme-switch" type="checkbox" checked>
                            <span class="slider"><span></span></span>
                        </label>
                    </div>
                </div>

                <button id="theme-toggle" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;" aria-pressed="false" title="Toggle Lyntr">Toggle Lyntr</button>
            </div>

      <button id="overlay-editor-btn" class="btn primary" title="Open overlay editor">Overlay Editor</button>
    </div>
  </header>

  <!-- ========================= MAIN ========================= -->
  <main class="container">
    <!-- Left Side -->
    <section class="panel current">
      <h2>Current Image</h2>

      <div class="current-box">
        <img src="{{ url_for('static', filename='images/Testpage.png') }}" class="image-preview" alt="Current image preview" id="current-box-image" />

        <div class="image-info">
          <p id="current-box-pc"><strong>PC:</strong> Canstein1</p>
          <p id="current-box-plot"><strong>Plot:</strong> 10;4</p>
          <p id="current-box-overlay"><strong>Overlay:</strong> overlayname</p>
        </div>

        <p id="current-box-no-data">No job currently running</p>
      </div>

      <div class="progress-bar">
        <div class="progress" id="job-progress" style="width: 40%;"></div>
      </div>
      <small id="job-time-left">Time left: 32s</small>
    </section>

    <!-- Queue -->
    <section class="panel queue">
      <div class="panel-header">
        <h2>Queue</h2>
      </div>
      <div class="queue-list" id="queue-list">
        <div class="queue-item">
          <img src="{{ url_for('static', filename='images/preview.jpg') }}" class="queue-image" alt="IMG" />
          <div class="queue-info">
            <p><strong>PC:</strong> Canstein1</p>
            <p><strong>Plot:</strong> 10;4</p>
            <p><strong>Overlay:</strong> overlayname</p>
          </div>
          <button class="btn primary">Print</button>
        </div>
        <div class="queue-item">
          <img src="{{ url_for('static', filename='images/Testpage.png') }}" class="queue-image" alt="IMG" />
          <div class="queue-info">
            <p><strong>PC:</strong> Canstein2</p>
            <p><strong>Plot:</strong> 12;5</p>
            <p><strong>Overlay:</strong> overlayname2</p>
          </div>
          <button class="btn primary">Print</button>
        </div>
        <div class="queue-item">
          <img src="{{ url_for('static', filename='images/Testpage.png') }}" class="queue-image" alt="IMG" />
          <div class="queue-info">
            <p><strong>PC:</strong> Canstein3</p>
            <p><strong>Plot:</strong> 12;5</p>
            <p><strong>Overlay:</strong> overlayname3</p>
          </div>
          <button class="btn primary">Print</button>
        </div>
        <div class="queue-item">
          <img src="{{ url_for('static', filename='images/Testpage.png') }}" class="queue-image" alt="IMG" />
          <div class="queue-info">
            <p><strong>PC:</strong> Canstein4</p>
            <p><strong>Plot:</strong> 12;5</p>
            <p><strong>Overlay:</strong> overlayname4</p>
          </div>
          <button class="btn primary">Print</button>
        </div>
        <div class="queue-item">
          <img src="{{ url_for('static', filename='images/Testpage.png') }}" class="queue-image" alt="IMG" />
          <div class="queue-info">
            <p><strong>PC:</strong> Canstein5</p>
            <p><strong>Plot:</strong> 12;5</p>
            <p><strong>Overlay:</strong> overlayname5</p>
          </div>
          <button class="btn primary">Print</button>
        </div>
        <div class="queue-item">
          <img src="{{ url_for('static', filename='images/Testpage.png') }}" class="queue-image" alt="IMG" />
          <div class="queue-info">
            <p><strong>PC:</strong> Canstein6</p>
            <p><strong>Plot:</strong> 12;5</p>
            <p><strong>Overlay:</strong> overlayname6</p>
          </div>
          <button class="btn primary">Print</button>
        </div>
      </div>
    </section>

    <!-- Right Side Controls -->
    <section class="panel controls">
      <h2>Status: <span class="status-text printing" id="status-text">Printing</span></h2>

      <label class="toggle">
        <input type="checkbox" id="auto-print-toggle" checked />
        <span class="slider"></span> Print On Receive
      </label>

      <div class="control-buttons">
        <button class="btn" id="btn-settings">Settings</button>
        <button class="btn" id="btn-more">More</button>
        <button class="btn warning" id="btn-pause">Pause</button>
      </div>

      <div class="active-overlay" id="active-overlay">Active Overlay</div>
    </section>

    <!-- Finished -->
    <section class="panel finished">
      <h2>Finished</h2>
      <div class="finished-list" id="finished-list">
        <div class="finished-item">
          <img src="{{ url_for('static', filename='images/preview.jpg') }}" class="finished-image" alt="IMG" />
          <div class="finished-info">
            <p><strong>PC:</strong> Canstein3</p>
            <p><strong>Plot:</strong> 14;6</p>
          </div>
        </div>
        <div class="finished-item">
          <img src="{{ url_for('static', filename='images/preview.jpg') }}" class="finished-image" alt="IMG" />
          <div class="finished-info">
            <p><strong>PC:</strong> Canstein3</p>
            <p><strong>Plot:</strong> 14;6</p>
          </div>
        </div>
        <div class="finished-item">
          <img src="{{ url_for('static', filename='images/preview.jpg') }}" class="finished-image" alt="IMG" />
          <div class="finished-info">
            <p><strong>PC:</strong> Canstein3</p>
            <p><strong>Plot:</strong> 14;6</p>
          </div>
        </div>
        <div class="finished-item">
          <img src="{{ url_for('static', filename='images/preview.jpg') }}" class="finished-image" alt="IMG" />
          <div class="finished-info">
            <p><strong>PC:</strong> Canstein3</p>
            <p><strong>Plot:</strong> 14;6</p>
          </div>
        </div>
      </div>
    </section>
  </main>

    <!-- Overlay Editor Container -->
    <div id="overlay-editor-container" class="overlay-editor-container hidden">
        <div class="overlay-editor">
            <div class="overlay-editor-header">
                <h2>Overlay Editor</h2>
                <button class="btn import-btn" title="Import template" aria-label="Import template">ðŸ“¥</button>
                <button class="btn export-btn" title="Export template" aria-label="Export template">ðŸ“¤</button>
                <div class="export-wrapper hidden">
                    <input type="text" id="export-filename" placeholder="overlayname.json">
                    <button class="btn primary export-confirm-btn" type="button">Save</button>
                    <label class="toggle" title="Save exported template to server">
                        <span style="margin-left:.5rem;margin-right:.5rem;font-size:14px;">Save to server?</span>
                        <input id="save-to-server" type="checkbox" checked>
                        <span class="slider"><span></span></span>
                    </label>
                </div>
                <button id="close-overlay-editor" class="btn" title="Close Overlay Editor">&times;</button>
            </div>

      <div class="overlay-editor-content">
        <!-- Stage -->
        <div id="overlay-stage" class="overlay-stage">
          <img id="overlay-image" src="{{ url_for('static', filename='images/preview2.jpg') }}" alt="Overlay Preview" class="overlay-image" />
          <div id="overlay-layer" class="overlay-layer" aria-label="Overlay elements layer"></div>
        </div>

        <!-- Controls -->
        <div class="overlay-controls">
          <div class="form-row" style="display:flex;gap:.5rem;">
            <div class="form-group" style="flex:1">
              <button class="btn primary add-text" type="button" style="width:100%;">Add Text</button>
            </div>
            <div class="form-group" style="flex:1">
              <button class="btn secondary add-image" type="button" style="width:100%;">Add Image</button>
            </div>
          </div>

          <div class="form-group">
            <label for="text-content">Text</label>
            <input id="text-content" type="text" placeholder="Edit selected text" />
          </div>

          <div class="form-row">
            <div class="form-group" style="flex:1">
              <label for="font-family">Font</label>
              <select id="font-family">
                <option value="'Minecraft', 'Minecraftia', system-ui, sans-serif">Minecraft</option>
                <option value="Inter, system-ui, sans-serif">Inter</option>
                <option value="Arial, Helvetica, sans-serif">Arial</option>
                <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Segoe UI</option>
                <option value="'Times New Roman', Times, serif">Times New Roman</option>
                <option value="Georgia, serif">Georgia</option>
                <option value="'Courier New', Courier, monospace">Courier New</option>
                <option value="'Lucida Console', Monaco, monospace">Lucida Console</option>
                <option value="'Comic Sans MS', cursive, sans-serif">Comic Sans MS</option>
                <option value="Impact, Charcoal, sans-serif">Impact</option>
                <option value="'Brush Script MT', cursive">Brush Script MT</option>
                <option value="'Papyrus', fantasy">Papyrus</option>
                <option value="Verdana, Geneva, sans-serif">Verdana</option>
                <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
              </select>
            </div>

            <div class="form-group" style="width:110px">
              <label for="font-size">Size</label>
              <input id="font-size" type="number" min="8" max="300" step="1" value="24" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group" style="flex:1">
              <label>Text Color</label>
              <div style="display:flex;gap:.5rem;align-items:center">
                <input id="text-color" type="color" value="#ffffff" />
                <input id="text-alpha" type="range" min="0" max="1" step="0.01" value="1" title="Text alpha" />
              </div>
            </div>

            <div class="form-group" style="flex:1">
              <label>Background</label>
              <div style="display:flex;gap:.5rem;align-items:center">
                <input id="bg-color" type="color" value="#000000" />
                <input id="bg-alpha" type="range" min="0" max="1" step="0.01" value="0" title="Background alpha" />
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group" style="flex:1">
              <label for="text-align">Align</label>
              <select id="text-align">
                <option value="left">Left</option>
                <option value="center">Center</option>
                <option value="right">Right</option>
              </select>
            </div>

            <div class="form-group" style="flex:1">
              <label for="rotation">Rotation</label>
              <input id="rotation" type="range" min="-180" max="180" step="1" value="0" />
            </div>

            <div class="form-group" style="flex:1">
              <label for="opacity">Opacity</label>
              <input id="opacity" type="range" min="0" max="1" step="0.05" value="1" />
            </div>
          </div>

          <div class="form-row" style="gap:.5rem">
            <div class="form-group" style="flex:1;display:flex;gap:.5rem">
              <button id="toggle-bold" class="btn" title="Toggle bold"><strong>Bold</strong></button>
              <button id="toggle-italic" class="btn" title="Toggle italic"><em>Italic</em></button>
              <button id="toggle-underline" class="btn" title="Toggle underline"><u>Underline </u></button>
            </div>

            <div class="form-group" style="display:flex;gap:.5rem">
              <button id="bring-forward" class="btn" title="Bring forward">Bring Forward</button>
              <button id="send-backward" class="btn" title="Send backward">Send Backward</button>
              <button id="delete-text" class="btn danger" title="Delete selected">Delete</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Templates Panel -->
    <div id="overlay-search-panel" class="overlay-search open">
      <button class="collapse-toggle" type="button" title="Collapse templates panel" aria-label="Collapse templates panel" aria-expanded="true"></button>
      <h3>Templates</h3>
      <ul class="overlay-templates-list">
        {% if overlay_templates %}
          {% for tpl in overlay_templates %}
            <li class="template-item" data-json="{{ url_for('static', filename='overlay-templates/' ~ tpl) }}">
              <div class="template-preview" style="margin-bottom:.5rem;">
                <div class="overlay-stage" style="position:relative; overflow:hidden;">
                  <img src="{{ url_for('static', filename='images/Testpage.png') }}" alt="Template preview" class="overlay-image" style="display:block; width:100%; height:auto;" />
                  <div class="overlay-layer" style="position:absolute; inset:0;"></div>
                </div>
              </div>

              <a href="{{ url_for('static', filename='overlay-templates/' ~ tpl) }}" target="_blank" rel="noopener">{{ tpl }}</a>
              <button class="btn small import-template" data-file="{{ tpl }}" title="Import template">Import</button>
              <button class="btn small danger delete-template" data-file="{{ tpl }}" title="Delete template">Delete</button>
            </li>
          {% endfor %}
        {% else %}
          <li class="empty">No templates found!</li>
        {% endif %}
      </ul>
    </div>
  </div>

  <!-- ========================= FOOTER ========================= -->
  <footer class="site-footer" role="contentinfo" style="padding:0.75rem 1rem;text-align:center;font-size:.85rem;color:var(--muted,#999);">
    <small>Website by <strong>nino.css</strong> Â· API by <strong>Hasenzahn1</strong></small>
  </footer>

  <!-- ========================= SCRIPTS ========================= -->
  <script src="scripts/export-and-import.js"></script>
  <script src="scripts/name-file.js"></script>
  <script src="scripts/utils.js"></script>
  <script src="scripts/appearance.js"></script>
  <script src="scripts/current-job.js"></script>
  <script src="scripts/templates.js"></script>

</body>
</html>
